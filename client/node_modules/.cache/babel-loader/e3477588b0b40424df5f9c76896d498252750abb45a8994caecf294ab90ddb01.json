{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Black\\\\WebstormProjects\\\\AppJobAbs\\\\client\\\\src\\\\context\\\\authContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as authService from \"../services/authService.js\";\nimport Path from \"../paths.js\";\nimport usePersistedState from \"../hooks/usePersistedState.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nAuthContext.displayName = 'AuthContext';\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [auth, setAuth] = usePersistedState('auth', {});\n  const registerSubmitHandler = async values => {\n    try {\n      const result = await authService.register(values.email, values.password, values.description);\n      setAuth({\n        email: values.email\n      });\n      localStorage.setItem('accessToken', result.token);\n      navigate(Path.Home);\n    } catch (error) {\n      console.error(\"Registration failed:\", error);\n      alert(\"Registration failed: \" + error.message);\n    }\n  };\n\n  // const loginSubmitHandler = async values => {\n  // \tconst result = await authService.login(values.email, values.password);\n  //\n  // \tsetAuth(result);\n  // \tlocalStorage.setItem('accessToken', result.accessToken);\n  // \tnavigate(Path.Home)\n  // };\n\n  const logoutHandler = () => {\n    setAuth({});\n    localStorage.removeItem('accessToken');\n    navigate(Path.Home);\n  };\n  const values = {\n    registerSubmitHandler,\n    logoutHandler,\n    email: auth.email,\n    _id: auth._id,\n    isAuthenticated: !!auth.email\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: values,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 3\n  }, this);\n};\n_s(AuthProvider, \"4JpqfV8MnvS7Yu58zHh2l5V4wmk=\", false, function () {\n  return [useNavigate, usePersistedState];\n});\n_c = AuthProvider;\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useNavigate","authService","Path","usePersistedState","jsxDEV","_jsxDEV","AuthContext","displayName","AuthProvider","children","_s","navigate","auth","setAuth","registerSubmitHandler","values","result","register","email","password","description","localStorage","setItem","token","Home","error","console","alert","message","logoutHandler","removeItem","_id","isAuthenticated","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Black/WebstormProjects/AppJobAbs/client/src/context/authContext.js"],"sourcesContent":["import {createContext, useState} from \"react\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport * as authService from \"../services/authService.js\";\r\nimport Path from \"../paths.js\";\r\nimport usePersistedState from \"../hooks/usePersistedState.js\";\r\n\r\nconst AuthContext = createContext();\r\nAuthContext.displayName = 'AuthContext';\r\n\r\nexport const AuthProvider = ({children}) => {\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [auth, setAuth] = usePersistedState('auth', {});\r\n\r\n\tconst registerSubmitHandler = async (values) => {\r\n\t\ttry {\r\n\t\t\tconst result = await authService.register(values.email, values.password, values.description);\r\n\t\t\tsetAuth({email: values.email});\r\n\t\t\tlocalStorage.setItem('accessToken', result.token);\r\n\r\n\t\t\tnavigate(Path.Home);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Registration failed:\", error);\r\n\t\t\talert(\"Registration failed: \" + error.message);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t// const loginSubmitHandler = async values => {\r\n\t// \tconst result = await authService.login(values.email, values.password);\r\n\t//\r\n\t// \tsetAuth(result);\r\n\t// \tlocalStorage.setItem('accessToken', result.accessToken);\r\n\t// \tnavigate(Path.Home)\r\n\t// };\r\n\r\n\tconst logoutHandler = () => {\r\n\t\tsetAuth({});\r\n\t\tlocalStorage.removeItem('accessToken');\r\n\t\tnavigate(Path.Home);\r\n\t}\r\n\r\n\tconst values = {\r\n\t\tregisterSubmitHandler,\r\n\t\tlogoutHandler,\r\n\t\temail: auth.email,\r\n\t\t_id: auth._id,\r\n\t\tisAuthenticated: !!auth.email,\r\n\t};\r\n\treturn (\r\n\t\t<AuthContext.Provider value={values}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n\r\nexport default AuthContext"],"mappings":";;AAAA,SAAQA,aAAa,EAAEC,QAAQ,QAAO,OAAO;AAC7C,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,OAAO,KAAKC,WAAW,MAAM,4BAA4B;AACzD,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,iBAAiB,MAAM,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9D,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;AACnCQ,WAAW,CAACC,WAAW,GAAG,aAAa;AAEvC,OAAO,MAAMC,YAAY,GAAGA,CAAC;EAACC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAC3C,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGV,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;EAErD,MAAMW,qBAAqB,GAAG,MAAOC,MAAM,IAAK;IAC/C,IAAI;MACH,MAAMC,MAAM,GAAG,MAAMf,WAAW,CAACgB,QAAQ,CAACF,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACI,QAAQ,EAAEJ,MAAM,CAACK,WAAW,CAAC;MAC5FP,OAAO,CAAC;QAACK,KAAK,EAAEH,MAAM,CAACG;MAAK,CAAC,CAAC;MAC9BG,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEN,MAAM,CAACO,KAAK,CAAC;MAEjDZ,QAAQ,CAACT,IAAI,CAACsB,IAAI,CAAC;IACpB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CE,KAAK,CAAC,uBAAuB,GAAGF,KAAK,CAACG,OAAO,CAAC;IAC/C;EACD,CAAC;;EAGD;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC3BhB,OAAO,CAAC,CAAC,CAAC,CAAC;IACXQ,YAAY,CAACS,UAAU,CAAC,aAAa,CAAC;IACtCnB,QAAQ,CAACT,IAAI,CAACsB,IAAI,CAAC;EACpB,CAAC;EAED,MAAMT,MAAM,GAAG;IACdD,qBAAqB;IACrBe,aAAa;IACbX,KAAK,EAAEN,IAAI,CAACM,KAAK;IACjBa,GAAG,EAAEnB,IAAI,CAACmB,GAAG;IACbC,eAAe,EAAE,CAAC,CAACpB,IAAI,CAACM;EACzB,CAAC;EACD,oBACCb,OAAA,CAACC,WAAW,CAAC2B,QAAQ;IAACC,KAAK,EAAEnB,MAAO;IAAAN,QAAA,EAClCA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAEzB,CAAC;AAAA5B,EAAA,CA7CYF,YAAY;EAAA,QACPR,WAAW,EAEJG,iBAAiB;AAAA;AAAAoC,EAAA,GAH7B/B,YAAY;AA+CzB,eAAeF,WAAW;AAAA,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}