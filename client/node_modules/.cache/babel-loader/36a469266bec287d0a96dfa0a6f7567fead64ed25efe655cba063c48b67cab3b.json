{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Black\\\\WebstormProjects\\\\AppJobAbs\\\\client\\\\src\\\\context\\\\authContext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as authService from \"../services/authService.js\";\nimport Path from \"../paths.js\";\nimport usePersistedState from \"../hooks/usePersistedState.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nAuthContext.displayName = 'AuthContext';\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [auth, setAuth] = usePersistedState('auth', {});\n  const registerSubmitHandler = async values => {\n    const result = await authService.register(values.email, values.password, values.description);\n    setAuth(result);\n    localStorage.setItem('accessToken', result.accessToken);\n    await profilService.create({\n      fullName: values.fullName,\n      imgUrl: values.imgUrl,\n      description: values.description\n    });\n    navigate(Path.Home);\n  };\n\n  // const loginSubmitHandler = async values => {\n  // \tconst result = await authService.login(values.email, values.password);\n  //\n  // \tsetAuth(result);\n  // \tlocalStorage.setItem('accessToken', result.accessToken);\n  // \tnavigate(Path.Home)\n  // };\n\n  const logoutHandler = () => {\n    setAuth({});\n    localStorage.removeItem('accessToken');\n    navigate(Path.Home);\n  };\n  const values = {\n    registerSubmitHandler,\n    logoutHandler,\n    accName: auth.accName,\n    email: auth.email,\n    _id: auth._id,\n    isAuthenticated: !!auth.email\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: values,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 3\n  }, this);\n};\n_s(AuthProvider, \"4JpqfV8MnvS7Yu58zHh2l5V4wmk=\", false, function () {\n  return [useNavigate, usePersistedState];\n});\n_c = AuthProvider;\nexport default AuthContext;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useNavigate","authService","Path","usePersistedState","jsxDEV","_jsxDEV","AuthContext","displayName","AuthProvider","children","_s","navigate","auth","setAuth","registerSubmitHandler","values","result","register","email","password","description","localStorage","setItem","accessToken","profilService","create","fullName","imgUrl","Home","logoutHandler","removeItem","accName","_id","isAuthenticated","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Black/WebstormProjects/AppJobAbs/client/src/context/authContext.js"],"sourcesContent":["import {createContext, useState} from \"react\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport * as authService from \"../services/authService.js\";\r\nimport Path from \"../paths.js\";\r\nimport usePersistedState from \"../hooks/usePersistedState.js\";\r\n\r\nconst AuthContext = createContext();\r\nAuthContext.displayName = 'AuthContext';\r\n\r\nexport const AuthProvider = ({children}) => {\r\n\tconst navigate = useNavigate();\r\n\r\n\tconst [auth, setAuth] = usePersistedState('auth', {});\r\n\r\n\tconst registerSubmitHandler = async (values) => {\r\n\t\tconst result = await authService.register(values.email, values.password, values.description);\r\n\t\tsetAuth(result);\r\n\t\tlocalStorage.setItem('accessToken', result.accessToken);\r\n\r\n\t\tawait profilService.create({fullName: values.fullName, imgUrl: values.imgUrl, description:values.description,})\r\n\r\n\t\tnavigate(Path.Home);\r\n\t}\r\n\r\n\t// const loginSubmitHandler = async values => {\r\n\t// \tconst result = await authService.login(values.email, values.password);\r\n\t//\r\n\t// \tsetAuth(result);\r\n\t// \tlocalStorage.setItem('accessToken', result.accessToken);\r\n\t// \tnavigate(Path.Home)\r\n\t// };\r\n\r\n\tconst logoutHandler = () => {\r\n\t\tsetAuth({});\r\n\t\tlocalStorage.removeItem('accessToken');\r\n\t\tnavigate(Path.Home);\r\n\t}\r\n\r\n\tconst values = {\r\n\t\tregisterSubmitHandler,\r\n\t\tlogoutHandler,\r\n\t\taccName: auth.accName,\r\n\t\temail: auth.email,\r\n\t\t_id: auth._id,\r\n\t\tisAuthenticated: !!auth.email,\r\n\t};\r\n\treturn (\r\n\t\t<AuthContext.Provider value={values}>\r\n\t\t\t{children}\r\n\t\t</AuthContext.Provider>\r\n\t)\r\n}\r\n\r\nexport default AuthContext"],"mappings":";;AAAA,SAAQA,aAAa,EAAEC,QAAQ,QAAO,OAAO;AAC7C,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,OAAO,KAAKC,WAAW,MAAM,4BAA4B;AACzD,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,iBAAiB,MAAM,+BAA+B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9D,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;AACnCQ,WAAW,CAACC,WAAW,GAAG,aAAa;AAEvC,OAAO,MAAMC,YAAY,GAAGA,CAAC;EAACC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAC3C,MAAMC,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGV,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;EAErD,MAAMW,qBAAqB,GAAG,MAAOC,MAAM,IAAK;IAC/C,MAAMC,MAAM,GAAG,MAAMf,WAAW,CAACgB,QAAQ,CAACF,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACI,QAAQ,EAAEJ,MAAM,CAACK,WAAW,CAAC;IAC5FP,OAAO,CAACG,MAAM,CAAC;IACfK,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEN,MAAM,CAACO,WAAW,CAAC;IAEvD,MAAMC,aAAa,CAACC,MAAM,CAAC;MAACC,QAAQ,EAAEX,MAAM,CAACW,QAAQ;MAAEC,MAAM,EAAEZ,MAAM,CAACY,MAAM;MAAEP,WAAW,EAACL,MAAM,CAACK;IAAY,CAAC,CAAC;IAE/GT,QAAQ,CAACT,IAAI,CAAC0B,IAAI,CAAC;EACpB,CAAC;;EAED;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,MAAMC,aAAa,GAAGA,CAAA,KAAM;IAC3BhB,OAAO,CAAC,CAAC,CAAC,CAAC;IACXQ,YAAY,CAACS,UAAU,CAAC,aAAa,CAAC;IACtCnB,QAAQ,CAACT,IAAI,CAAC0B,IAAI,CAAC;EACpB,CAAC;EAED,MAAMb,MAAM,GAAG;IACdD,qBAAqB;IACrBe,aAAa;IACbE,OAAO,EAAEnB,IAAI,CAACmB,OAAO;IACrBb,KAAK,EAAEN,IAAI,CAACM,KAAK;IACjBc,GAAG,EAAEpB,IAAI,CAACoB,GAAG;IACbC,eAAe,EAAE,CAAC,CAACrB,IAAI,CAACM;EACzB,CAAC;EACD,oBACCb,OAAA,CAACC,WAAW,CAAC4B,QAAQ;IAACC,KAAK,EAAEpB,MAAO;IAAAN,QAAA,EAClCA;EAAQ;IAAA2B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACY,CAAC;AAEzB,CAAC;AAAA7B,EAAA,CA1CYF,YAAY;EAAA,QACPR,WAAW,EAEJG,iBAAiB;AAAA;AAAAqC,EAAA,GAH7BhC,YAAY;AA4CzB,eAAeF,WAAW;AAAA,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}